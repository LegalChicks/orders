<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Legal Chicks Poultry Farm</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    h1 { color: #2e7d32; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 10px; text-align: center; }
    th { background: #f4f4f4; }
    .total-box { margin-top: 20px; font-size: 18px; font-weight: bold; }
    .summary-line { margin-top: 6px; }
    .form-box { margin-top: 40px; }
    input, select, textarea { margin: 5px 0; padding: 8px; width: 100%; max-width: 400px; }
    button {
      background: #2e7d32; color: #fff; border: none;
      padding: 12px 20px; border-radius: 5px; font-size: 16px; cursor: pointer;
    }
    button:hover { background: #1b5e20; }
  </style>
</head>
<body>
  <h1>üêì Welcome to Legal Chicks Poultry Farm</h1>
  <p>Order your fresh poultry directly from our farm. Input the quantity you want for each product below.</p>

  <!-- Order Table -->
  <form id="orderForm">
    <table>
      <thead>
        <tr>
          <th>Product</th>
          <th>Price</th>
          <th>Quantity</th>
          <th>Subtotal</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Rhode Island Red ‚Äì 1 Week Old (7 days)</td>
          <td>‚Ç±150</td>
          <td><input type="number" min="0" value="0" class="qty" data-price="150"></td>
          <td class="subtotal">‚Ç±0</td>
        </tr>
        <tr>
          <td>Rhode Island Red ‚Äì 2 Weeks Old (14 days)</td>
          <td>‚Ç±220</td>
          <td><input type="number" min="0" value="0" class="qty" data-price="220"></td>
          <td class="subtotal">‚Ç±0</td>
        </tr>
        <tr>
          <td>Rhode Island Red ‚Äì 1 Month Old (30 days)</td>
          <td>‚Ç±380</td>
          <td><input type="number" min="0" value="0" class="qty" data-price="380"></td>
          <td class="subtotal">‚Ç±0</td>
        </tr>
        <tr>
          <td>Rhode Island Red ‚Äì 2 Months Old (60 days)</td>
          <td>‚Ç±680</td>
          <td><input type="number" min="0" value="0" class="qty" data-price="680"></td>
          <td class="subtotal">‚Ç±0</td>
        </tr>
        <tr>
          <td>Rhode Island Red ‚Äì 3 Months Old (90 days)</td>
          <td>‚Ç±980</td>
          <td><input type="number" min="0" value="0" class="qty" data-price="980"></td>
          <td class="subtotal">‚Ç±0</td>
        </tr>
        <tr>
          <td>Rhode Island Red ‚Äì 4 Months Old (120 days)</td>
          <td>‚Ç±1,280</td>
          <td><input type="number" min="0" value="0" class="qty" data-price="1280"></td>
          <td class="subtotal">‚Ç±0</td>
        </tr>
        <tr>
          <td>Rhode Island Red ‚Äì 5 Months Old (150 days, Ready-to-Lay)</td>
          <td>‚Ç±1,580</td>
          <td><input type="number" min="0" value="0" class="qty" data-price="1580"></td>
          <td class="subtotal">‚Ç±0</td>
        </tr>
        <tr>
          <td>Rhode Island Red ‚Äì 6 Months Old (180 days, Breeder Stock)</td>
          <td>‚Ç±1,880</td>
          <td><input type="number" min="0" value="0" class="qty" data-price="1880"></td>
          <td class="subtotal">‚Ç±0</td>
        </tr>
      </tbody>
    </table>
  </form>

  <!-- Totals -->
  <div class="total-box">
    <div class="summary-line">Total Quantity: <span id="totalQty">0</span></div>
    <div class="summary-line">Subtotal: <span id="subtotal">‚Ç±0</span></div>
    <div class="summary-line">Discount: <span id="discount">‚Ç±0</span></div>
    <div class="summary-line">Final Total: <span id="total">‚Ç±0</span></div>
    <div class="summary-line">Order Timestamp (Philippines): <span id="timestamp"></span></div>
  </div>

  <!-- Customer Info -->
  <div class="form-box">
    <h2>Checkout</h2>
    <input type="text" id="custName" placeholder="Full Name" required>
    <input type="text" id="custContact" placeholder="Contact Number" required>
    <input type="text" id="custLocation" placeholder="Location" required>
    <select id="custMethod">
      <option value="Pickup">Farm Pickup</option>
      <option value="Delivery">Delivery</option>
    </select>
    <textarea id="custNotes" placeholder="Notes / Special Requests"></textarea>
    <br><br>
    <button id="checkoutBtn">Proceed to Checkout</button>
  </div>

  <script>
    const inputs = document.querySelectorAll(".qty");
    const subtotalEl = document.getElementById("subtotal");
    const discountEl = document.getElementById("discount");
    const totalEl = document.getElementById("total");
    const totalQtyEl = document.getElementById("totalQty");
    const timestampEl = document.getElementById("timestamp");

    const custName = document.getElementById("custName");
    const custContact = document.getElementById("custContact");
    const custLocation = document.getElementById("custLocation");
    const custMethod = document.getElementById("custMethod");
    const custNotes = document.getElementById("custNotes");
    const checkoutBtn = document.getElementById("checkoutBtn");

    // Replace with your Google Form base URL
    const formBaseURL = "https://docs.google.com/forms/d/e/1FAIpQLSdQ7t-W1CD-0X9HOwdm6tYeabe9IXJhd9VP7wE35GdPrKJ4aA/viewform?usp=pp_url&entry.397355570";
    const entryOrderDetails = "entry.397355570"; // Replace with your Order Details field ID

    let subtotal = 0, discount = 0, finalTotal = 0, totalQty = 0, orderLines = [], timestamp = "";

    function updateTotals() {
      subtotal = 0; totalQty = 0; orderLines = [];

      document.querySelectorAll("tbody tr").forEach(row => {
        const qty = parseInt(row.querySelector(".qty").value) || 0;
        const price = parseInt(row.querySelector(".qty").dataset.price);
        const rowSubtotal = qty * price;

        row.querySelector(".subtotal").textContent = "‚Ç±" + rowSubtotal.toLocaleString();

        if (qty > 0) orderLines.push(`${row.cells[0].textContent}: ${qty} pcs ‚Äî ‚Ç±${rowSubtotal.toLocaleString()}`);

        subtotal += rowSubtotal;
        totalQty += qty;
      });

      discount = totalQty >= 30 ? subtotal * 0.05 : 0;
      finalTotal = subtotal - discount;

      subtotalEl.textContent = "‚Ç±" + subtotal.toLocaleString();
      discountEl.textContent = discount > 0 ? `-‚Ç±${discount.toLocaleString()} (bulk order)` : "‚Ç±0";
      totalEl.textContent = "‚Ç±" + finalTotal.toLocaleString();
      totalQtyEl.textContent = totalQty;

      const now = new Date();
      timestamp = now.toLocaleString("en-PH", { timeZone: "Asia/Manila" });
      timestampEl.textContent = timestamp;
    }

    inputs.forEach(input => input.addEventListener("input", updateTotals));
    updateTotals();

    checkoutBtn.addEventListener("click", () => {
      if (!custName.value || !custContact.value || !custLocation.value) {
        alert("Please fill out all required fields before checkout.");
        return;
      }

      const orderDetailsText =
        `Customer: ${custName.value}\n` +
        `Contact: ${custContact.value}\n` +
        `Location: ${custLocation.value}\n` +
        `Order Method: ${custMethod.value}\n` +
        `Notes: ${custNotes.value || "None"}\n\n` +
        `--- Order Summary ---\n` +
        (orderLines.length > 0 ? orderLines.join("\n") : "No items ordered.") + "\n" +
        `Subtotal (before discount): ‚Ç±${subtotal.toLocaleString()}\n` +
        (discount > 0
          ? `Discount Applied: -‚Ç±${discount.toLocaleString()} (for bulk order of ${totalQty} items)\n`
          : "No Discount Applied\n") +
        `Final Total: ‚Ç±${finalTotal.toLocaleString()}\n` +
        `Order Timestamp (Philippines): ${timestamp}`;

      const formURL = `${formBaseURL}&${entryOrderDetails}=${encodeURIComponent(orderDetailsText)}`;
      window.open(formURL, "_blank");
    });
  </script>
</body>
</html>
